<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>El Hobbit - Detalle del Libro</title>

    <!-- CSS -->
    <link rel="stylesheet" href="../CSS/BibliotecaDigital.css">
    <link rel="stylesheet" href="../CSS/LibroDetalles.css">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Space+Mono:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">
</head>

<body>
    <!-- Header -->
    <header>
        <div class="logo">
            <img src="../IMG/Logo sin fondo.webp" alt="Logo Biblioteca Digital" style="height: 55px; width: auto;">
            <h1>Biblioteca Digital</h1>
        </div>
    </header>

    <!-- Main Content -->
    <main>
        <div class="detalle-libro-container">
            <!-- Botón Volver -->
            <a href="../Index-HTML/Index.html" class="boton-volver">
                ← Volver a la biblioteca
            </a>

            <!-- Contenido Principal -->
            <div class="detalle-libro">
                <!-- Imagen y Detalles Básicos -->
                <div class="libro-portada-info">
                    <div class="portada-container">
                        <img src="../IMG/Portadas/El Hobbit.webp" alt="Portada de El Hobbit" class="portada-detalle">
                    </div>

                    <div class="info-basica">
                        <h1>El Hobbit</h1>
                        <div class="metadata">
                            <p class="autor">Por J.R.R. Tolkien</p>
                            <p class="año">Año: 1937</p>
                            <div class="calificacion">
                                <span class="estrellas">★★★★☆</span>
                                <span class="puntuacion">4.7/5</span>
                                <p class="expertos">Calificación de expertos</p>
                            </div>
                            <div class="tags">
                                <span class="tag">Fantasía</span>
                                <span class="tag">Aventura</span>
                                <span class="tag">Clásico</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Botón para agregar al carrito -->
                <button onclick="agregarAlCarrito(2, 'El Hobbit', '/IMG/El_Hobbit.webp', 15, 1)">
                    Agregar al carrito
                </button>

                <script>
                    // Función para agregar al carrito
                    function agregarAlCarrito(id, nombre) {
                        // Pedir al usuario la cantidad de días
                        let dias = prompt("¿Cuántos días quieres alquilar este libro? (1-30)", "1");

                        // Validar la cantidad de días ingresada
                        if (dias === null || isNaN(dias) || dias < 1 || dias > 30) {
                            alert("Por favor, ingresa un número de días válido entre 1 y 30.");
                            return; // Salir de la función si no es válido
                        }

                        // Obtener el carrito actual desde localStorage, o crear uno vacío si no existe
                        let carrito = JSON.parse(localStorage.getItem('carrito')) || [];

                        // Verificar si el producto ya está en el carrito
                        let productoExistente = carrito.find(item => item.id === id);

                        if (productoExistente) {
                            // Si el producto ya está, se actualiza la cantidad de días
                            productoExistente.dias = parseInt(dias);
                        } else {
                            // Si no está, se agrega el nuevo libro con los días
                            carrito.push({ id, nombre, dias: parseInt(dias) });
                        }

                        // Guardar el carrito actualizado en localStorage
                        localStorage.setItem('carrito', JSON.stringify(carrito));

                        // Confirmar al usuario
                        alert(`"${nombre}" ha sido agregado al carrito para ${dias} días.`);

                        // Redirigir a la página del carrito
                        window.location.href = "/Index-HTML/Carrito.html";
                    }
                </script>

                <!-- Sinopsis y Detalles -->
                <div class="contenido-detallado">
                    <section class="sinopsis">
                        <h2>Sinopsis</h2>
                        <p>El Hobbit narra las aventuras de Bilbo Bolsón, un hobbit que lleva una vida tranquila en la Comarca hasta que un día se ve envuelto en una épica aventura con un grupo de enanos y el mago Gandalf.</p>
                        <p>Este clásico de la literatura fantástica nos lleva a un mundo lleno de dragones, tesoros y héroes improbables, recordándonos que hasta el más pequeño puede cambiar el destino del mundo.</p>
                    </section>

                    <section class="detalles-adicionales">
                        <h2>Detalles del Libro</h2>
                        <div class="grid-detalles">
                            <div class="detalle">
                                <h3>Editorial</h3>
                                <p>Allen & Unwin</p>
                            </div>
                            <div class="detalle">
                                <h3>Idioma Original</h3>
                                <p>Inglés</p>
                            </div>
                            <div class="detalle">
                                <h3>Páginas</h3>
                                <p>310</p>
                            </div>
                            <div class="detalle">
                                <h3>ISBN</h3>
                                <p>978-0547928227</p>
                            </div>
                        </div>
                    </section>

                    <section class="criticas">
                        <h2>Críticas de Expertos</h2>
                        <div class="critica">
                            <p class="texto-critica">"Un clásico eterno que marcó el inicio del género de fantasía moderna."</p>
                            <p class="autor-critica">- The Times</p>
                        </div>
                        <div class="critica">
                            <p class="texto-critica">"Una obra maestra que deleita a lectores de todas las edades con su magia y aventuras."</p>
                            <p class="autor-critica">- The Guardian</p>
                        </div>
                    </section>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer>
        <p>&copy; 2024 Biblioteca Digital. Todos los derechos reservados.</p>
    </footer>
</body>

</html>
